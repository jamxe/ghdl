<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="author" title="About these documents" href="../about.html" /><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <link rel="shortcut icon" href="../_static/icon.png"/><!-- Generated with Sphinx 6.1.3 and Furo 2023.03.27 -->
        <title>pyVHDLModel - 4.0.0-dev</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f0f3f3;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">4.0.0-dev</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">4.0.0-dev</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting.html">Getting | Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses.html">Copyrights | Licenses</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GHDL usage</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../quick_start/index.html">Quick Start Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../quick_start/simulation/index.html">Simulation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../quick_start/simulation/hello/index.html"><cite>Hello world</cite> program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quick_start/simulation/heartbeat/index.html"><cite>Heartbeat</cite> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quick_start/simulation/adder/index.html"><cite>Full adder</cite> module and testbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quick_start/simulation/DLXModelSuite.html">Working with non-trivial designs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://ghdl.github.io/ghdl-cosim">Co-Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start/python/index.html">Python Interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using/InvokingGHDL.html">Invoking GHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/Simulation.html">Simulation (runtime)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/Synthesis.html">Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/CommandReference.html">Additional Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/ImplementationOfVHDL.html">Implementation of VHDL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/ImplementationOfVITAL.html">Implementation of VITAL</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/Directories.html">Directory structure</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/building/index.html">Building GHDL</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/building/Sources.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/building/mcode.html">mcode backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/building/LLVM.html">LLVM backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/building/GCC.html">GCC backend</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.html">Python Interfaces</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.cli.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.cli</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.cli.dom.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.cli.dom</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.cli.lsp.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.cli.lsp</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Aggregates.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Aggregates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Attribute.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Attribute</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Concurrent.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Concurrent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.DesignUnit.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.DesignUnit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Expression.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Expression</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.InterfaceItem.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.InterfaceItem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Literal.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Literal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Misc.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Misc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Names.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.NonStandard.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.NonStandard</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Object.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Object</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.PSL.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.PSL</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Range.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Range</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Sequential.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Sequential</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Subprogram.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Subprogram</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Symbol.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Symbol</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.Type.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.Type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom._Translate.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom._Translate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.dom._Utils.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom._Utils</span></code></a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.formatting.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.formatting</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.formatting.GraphML.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.formatting.GraphML</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.dom.formatting.prettyprint.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.dom.formatting.prettyprint</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl._decorator.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl._decorator</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl._types.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl._types</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.errorout.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.errorout</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.errorout_console.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.errorout_console</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.errorout_memory.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.errorout_memory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.file_comments.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.file_comments</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.files_map.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.files_map</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.files_map_editor.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.files_map_editor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.flags.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.flags</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.libraries.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.libraries</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.name_table.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.name_table</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.std_names.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.std_names</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.str_table.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.str_table</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.utils.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.utils</span></code></a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.canon.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.canon</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.elocations.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.elocations</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.flists.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.flists</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.formatters.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.formatters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.ieee.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.ieee</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.lists.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.lists</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.nodes.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.nodes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.nodes_meta.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.nodes_meta</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.nodes_utils.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.nodes_utils</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.parse.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.parse</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.prints.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.prints</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.scanner.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.scanner</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.sem.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.sem</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.sem_lib.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.sem_lib</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.std_package.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.std_package</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.tokens.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.tokens</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyGHDL/pyGHDL.libghdl.vhdl.utils.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.libghdl.vhdl.utils</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.document.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.document</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.lsp.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.lsp</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.lsptools.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.lsptools</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.references.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.references</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.symbols.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.symbols</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.version.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.version</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.vhdl_ls.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.vhdl_ls</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyGHDL/pyGHDL.lsp.workspace.html"><code class="docutils literal notranslate"><span class="pre">pyGHDL.lsp.workspace</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ghw/index.html">GHDL Waveform (GHW)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/Debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/CodingStyle.html">Coding Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/Scripts.html">Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../internals/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/Frontend.html">Front-end</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/AST.html">AST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/RTI.html">Run Time Information (RTI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gnatdoc/index.html">GNATdoc</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Python Module Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for pyVHDLModel</h1><div class="highlight"><pre>
<span></span><span class="c1"># ==================================================================================================================== #</span>
<span class="c1">#             __     ___   _ ____  _     __  __           _      _                                                     #</span>
<span class="c1">#   _ __  _   \ \   / / | | |  _ \| |   |  \/  | ___   __| | ___| |                                                    #</span>
<span class="c1">#  | &#39;_ \| | | \ \ / /| |_| | | | | |   | |\/| |/ _ \ / _` |/ _ \ |                                                    #</span>
<span class="c1">#  | |_) | |_| |\ V / |  _  | |_| | |___| |  | | (_) | (_| |  __/ |                                                    #</span>
<span class="c1">#  | .__/ \__, | \_/  |_| |_|____/|_____|_|  |_|\___/ \__,_|\___|_|                                                    #</span>
<span class="c1">#  |_|    |___/                                                                                                        #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1"># Authors:                                                                                                             #</span>
<span class="c1">#   Patrick Lehmann                                                                                                    #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># License:                                                                                                             #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1"># Copyright 2017-2023 Patrick Lehmann - Boetzingen, Germany                                                            #</span>
<span class="c1"># Copyright 2016-2017 Patrick Lehmann - Dresden, Germany                                                               #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);                                                      #</span>
<span class="c1"># you may not use this file except in compliance with the License.                                                     #</span>
<span class="c1"># You may obtain a copy of the License at                                                                              #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0                                                                         #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software                                                  #</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,                                                    #</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.                                             #</span>
<span class="c1"># See the License for the specific language governing permissions and                                                  #</span>
<span class="c1"># limitations under the License.                                                                                       #</span>
<span class="c1">#                                                                                                                      #</span>
<span class="c1"># SPDX-License-Identifier: Apache-2.0                                                                                  #</span>
<span class="c1"># ==================================================================================================================== #</span>
<span class="c1">#</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">**An abstract VHDL language model.**</span>

<span class="sd">This package provides a unified abstract language model for VHDL. Projects reading from source files can derive own</span>
<span class="sd">classes and implement additional logic to create a concrete language model for their tools.</span>

<span class="sd">Projects consuming pre-processed VHDL data (parsed, analyzed or elaborated) can build higher level features and services</span>
<span class="sd">on such a model, while supporting multiple frontends.</span>

<span class="sd">.. admonition:: Copyright Information</span>

<span class="sd">   :copyright: Copyright 2017-2023 Patrick Lehmann - Bötzingen, Germany</span>
<span class="sd">   :copyright: Copyright 2016-2017 Patrick Lehmann - Dresden, Germany</span>
<span class="sd">   :license: Apache License, Version 2.0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__author__</span> <span class="o">=</span>    <span class="s2">&quot;Patrick Lehmann&quot;</span>
<span class="n">__email__</span> <span class="o">=</span>     <span class="s2">&quot;Paebbels@gmail.com&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;2016-2023, Patrick Lehmann&quot;</span>
<span class="n">__license__</span> <span class="o">=</span>   <span class="s2">&quot;Apache License, Version 2.0&quot;</span>
<span class="n">__version__</span> <span class="o">=</span>   <span class="s2">&quot;0.23.0&quot;</span>


<span class="kn">from</span> <span class="nn">enum</span>                      <span class="kn">import</span> <span class="n">unique</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Flag</span><span class="p">,</span> <span class="n">auto</span>
<span class="kn">from</span> <span class="nn">pathlib</span>                   <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">typing</span>                    <span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">cast</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Optional</span> <span class="k">as</span> <span class="n">Nullable</span>

<span class="kn">from</span> <span class="nn">pyTooling.Decorators</span>      <span class="kn">import</span> <span class="n">export</span>
<span class="kn">from</span> <span class="nn">pyTooling.Graph</span>           <span class="kn">import</span> <span class="n">Graph</span><span class="p">,</span> <span class="n">Vertex</span><span class="p">,</span> <span class="n">Edge</span>

<span class="kn">from</span> <span class="nn">pyVHDLModel.Exception</span>     <span class="kn">import</span> <span class="n">VHDLModelException</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Exception</span>     <span class="kn">import</span> <span class="n">LibraryExistsInDesignError</span><span class="p">,</span> <span class="n">LibraryRegisteredToForeignDesignError</span><span class="p">,</span> <span class="n">LibraryNotRegisteredError</span><span class="p">,</span> <span class="n">EntityExistsInLibraryError</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Exception</span>     <span class="kn">import</span> <span class="n">ArchitectureExistsInLibraryError</span><span class="p">,</span> <span class="n">PackageExistsInLibraryError</span><span class="p">,</span> <span class="n">PackageBodyExistsError</span><span class="p">,</span> <span class="n">ConfigurationExistsInLibraryError</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Exception</span>     <span class="kn">import</span> <span class="n">ContextExistsInLibraryError</span><span class="p">,</span> <span class="n">ReferencedLibraryNotExistingError</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Base</span>          <span class="kn">import</span> <span class="n">ModelEntity</span><span class="p">,</span> <span class="n">NamedEntityMixin</span><span class="p">,</span> <span class="n">DocumentedEntityMixin</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Symbol</span>        <span class="kn">import</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">,</span> <span class="n">PackageMembersReferenceSymbol</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Concurrent</span>    <span class="kn">import</span> <span class="n">EntityInstantiation</span><span class="p">,</span> <span class="n">ComponentInstantiation</span><span class="p">,</span> <span class="n">ConfigurationInstantiation</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.DesignUnit</span>    <span class="kn">import</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">,</span> <span class="n">Context</span><span class="p">,</span> <span class="n">Entity</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">,</span> <span class="n">Package</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.PSLModel</span>      <span class="kn">import</span> <span class="n">VerificationUnit</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">,</span> <span class="n">VerificationMode</span>
<span class="kn">from</span> <span class="nn">pyVHDLModel.Instantiation</span> <span class="kn">import</span> <span class="n">PackageInstantiation</span>


<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span> <span class="nc">VHDLVersion</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	An enumeration for all possible version numbers for VHDL and VHDL-AMS.</span>

<span class="sd">	A version can be given as integer or string and is represented as a unified</span>
<span class="sd">	enumeration value.</span>

<span class="sd">	This enumeration supports compare operators.</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="n">Any</span> <span class="o">=</span>                <span class="o">-</span><span class="mi">1</span>  <span class="c1">#: Any</span>
	<span class="n">VHDL87</span> <span class="o">=</span>             <span class="mi">87</span>  <span class="c1">#: VHDL-1987</span>
	<span class="n">VHDL93</span> <span class="o">=</span>             <span class="mi">93</span>  <span class="c1">#: VHDL-1993</span>
<span class="c1">#	AMS93 =              93  #:</span>
	<span class="n">AMS99</span> <span class="o">=</span>              <span class="mi">99</span>  <span class="c1">#: VHDL-AMS-1999</span>
	<span class="n">VHDL2000</span> <span class="o">=</span>         <span class="mi">2000</span>  <span class="c1">#: VHDL-2000</span>
	<span class="n">VHDL2002</span> <span class="o">=</span>         <span class="mi">2002</span>  <span class="c1">#: VHDL-2002</span>
	<span class="n">VHDL2008</span> <span class="o">=</span>         <span class="mi">2008</span>  <span class="c1">#: VHDL-2008</span>
	<span class="n">AMS2017</span> <span class="o">=</span>          <span class="mi">2017</span>  <span class="c1">#: VHDL-AMS-2017</span>
	<span class="n">VHDL2019</span> <span class="o">=</span>         <span class="mi">2019</span>  <span class="c1">#: VHDL-2019</span>
	<span class="n">Latest</span> <span class="o">=</span>          <span class="mi">10000</span>  <span class="c1">#: Latest VHDL (2019)</span>

	<span class="n">__VERSION_MAPPINGS__</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">Enum</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="mi">87</span><span class="p">:</span>     <span class="n">VHDL87</span><span class="p">,</span>
		<span class="mi">93</span><span class="p">:</span>     <span class="n">VHDL93</span><span class="p">,</span>
		<span class="mi">99</span><span class="p">:</span>     <span class="n">AMS99</span><span class="p">,</span>
		<span class="mi">0</span><span class="p">:</span>      <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="mi">2</span><span class="p">:</span>      <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="mi">8</span><span class="p">:</span>      <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="mi">17</span><span class="p">:</span>     <span class="n">AMS2017</span><span class="p">,</span>
		<span class="mi">19</span><span class="p">:</span>     <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="mi">1987</span><span class="p">:</span>   <span class="n">VHDL87</span><span class="p">,</span>
		<span class="mi">1993</span><span class="p">:</span>   <span class="n">VHDL93</span><span class="p">,</span>
		<span class="mi">1999</span><span class="p">:</span>   <span class="n">AMS99</span><span class="p">,</span>
		<span class="mi">2000</span><span class="p">:</span>   <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="mi">2002</span><span class="p">:</span>   <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="mi">2008</span><span class="p">:</span>   <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="mi">2017</span><span class="p">:</span>   <span class="n">AMS2017</span><span class="p">,</span>
		<span class="mi">2019</span><span class="p">:</span>   <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="s2">&quot;Any&quot;</span><span class="p">:</span>  <span class="n">Any</span><span class="p">,</span>
		<span class="s2">&quot;Latest&quot;</span><span class="p">:</span> <span class="n">Latest</span><span class="p">,</span>
		<span class="s2">&quot;87&quot;</span><span class="p">:</span>   <span class="n">VHDL87</span><span class="p">,</span>
		<span class="s2">&quot;93&quot;</span><span class="p">:</span>   <span class="n">VHDL93</span><span class="p">,</span>
		<span class="s2">&quot;99&quot;</span><span class="p">:</span>   <span class="n">AMS99</span><span class="p">,</span>
		<span class="s2">&quot;00&quot;</span><span class="p">:</span>   <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="s2">&quot;02&quot;</span><span class="p">:</span>   <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="s2">&quot;08&quot;</span><span class="p">:</span>   <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="s2">&quot;17&quot;</span><span class="p">:</span>   <span class="n">AMS2017</span><span class="p">,</span>
		<span class="s2">&quot;19&quot;</span><span class="p">:</span>   <span class="n">VHDL2019</span><span class="p">,</span>
		<span class="s2">&quot;1987&quot;</span><span class="p">:</span> <span class="n">VHDL87</span><span class="p">,</span>
		<span class="s2">&quot;1993&quot;</span><span class="p">:</span> <span class="n">VHDL93</span><span class="p">,</span>
		<span class="s2">&quot;1999&quot;</span><span class="p">:</span> <span class="n">AMS99</span><span class="p">,</span>
		<span class="s2">&quot;2000&quot;</span><span class="p">:</span> <span class="n">VHDL2000</span><span class="p">,</span>
		<span class="s2">&quot;2002&quot;</span><span class="p">:</span> <span class="n">VHDL2002</span><span class="p">,</span>
		<span class="s2">&quot;2008&quot;</span><span class="p">:</span> <span class="n">VHDL2008</span><span class="p">,</span>
		<span class="s2">&quot;2017&quot;</span><span class="p">:</span> <span class="n">AMS2017</span><span class="p">,</span>
		<span class="s2">&quot;2019&quot;</span><span class="p">:</span> <span class="n">VHDL2019</span>
	<span class="p">}</span>  <span class="c1">#: Dictionary of VHDL and VHDL-AMS year codes variants as integer and strings for mapping to unique enum values.</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Patch the embedded MAP dictionary&quot;&quot;&quot;</span>
		<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="p">((</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">v</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)):</span>
				<span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">Parse</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Enum&#39;</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Parses a VHDL or VHDL-AMS year code as integer or string to an enum value.</span>

<span class="sd">		:param value:       VHDL/VHDL-AMS year code.</span>
<span class="sd">		:returns:           Enumeration value.</span>
<span class="sd">		:raises ValueError: If the year code is not recognized.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__VERSION_MAPPINGS__</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Value &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">!s}</span><span class="s2">&#39; cannot be parsed to member of </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is less than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is less than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is less or equal than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is less or equal than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is greater than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is greater than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is greater or equal than the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is greater or equal than the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is unequal to the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is unequal to the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Compare two VHDL/VHDL-AMS versions if the version is equal to the second operand.</span>

<span class="sd">		:param other:      Parameter to compare against.</span>
<span class="sd">		:returns:          True if version is equal to the second operand.</span>
<span class="sd">		:raises TypeError: If parameter ``other`` is not of type :class:`VHDLVersion`.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">VHDLVersion</span><span class="p">):</span>
			<span class="k">if</span> <span class="p">((</span><span class="bp">self</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">Any</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">Any</span><span class="p">)):</span>
				<span class="k">return</span> <span class="kc">True</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Second operand is not of type &#39;VHDLVersion&#39;.&quot;</span><span class="p">)</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">IsVHDL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Checks if the version is a VHDL (not VHDL-AMS) version.</span>

<span class="sd">		:returns:          True if version is a VHDL version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">VHDL87</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL93</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2002</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2008</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">VHDL2019</span><span class="p">)</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">IsAMS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Checks if the version is a VHDL-AMS (not VHDL) version.</span>

<span class="sd">		:returns:          True if version is a VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">AMS99</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">AMS2017</span><span class="p">)</span>

	<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the VHDL version to pattern ``VHDL&#39;xx`` or in case of VHDL-AMS to ``VHDL-AMS&#39;xx``.</span>

<span class="sd">		:return: Formatted VHDL/VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="n">year</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsVHDL</span><span class="p">:</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;VHDL&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;VHDL-AMS&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span>

	<span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the VHDL/VHDL-AMS version to pattern ``xxxx``.</span>

<span class="sd">		:return: Formatted VHDL/VHDL-AMS version.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>


<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span> <span class="nc">ObjectClass</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	An ``ObjectClass`` is an enumeration. It represents an object&#39;s class (``constant``, ``signal``, ...).</span>

<span class="sd">	In case no *object class* is defined, ``Default`` is used, so the *object class* is inferred from context.</span>
<span class="sd">	&quot;&quot;&quot;</span>

	<span class="n">Default</span> <span class="o">=</span>    <span class="mi">0</span>  <span class="c1">#: Object class not defined, thus it&#39;s context dependent.</span>
	<span class="n">Constant</span> <span class="o">=</span>   <span class="mi">1</span>  <span class="c1">#: Constant</span>
	<span class="n">Variable</span> <span class="o">=</span>   <span class="mi">2</span>  <span class="c1">#: Variable</span>
	<span class="n">Signal</span> <span class="o">=</span>     <span class="mi">3</span>  <span class="c1">#: Signal</span>
	<span class="n">File</span> <span class="o">=</span>       <span class="mi">4</span>  <span class="c1">#: File</span>
	<span class="n">Type</span> <span class="o">=</span>       <span class="mi">5</span>  <span class="c1">#: Type</span>
	<span class="c1"># FIXME: Package?</span>
	<span class="n">Procedure</span> <span class="o">=</span>  <span class="mi">6</span>  <span class="c1">#: Procedure</span>
	<span class="n">Function</span> <span class="o">=</span>   <span class="mi">7</span>  <span class="c1">#: Function</span>

	<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Formats the object class.</span>

<span class="sd">		:return: Formatted object class.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;constant&quot;</span><span class="p">,</span> <span class="s2">&quot;variable&quot;</span><span class="p">,</span> <span class="s2">&quot;signal&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;procedure&quot;</span><span class="p">,</span> <span class="s2">&quot;function&quot;</span><span class="p">)[</span><span class="n">cast</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)]</span>       <span class="c1"># TODO: check performance</span>


<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span> <span class="nc">DesignUnitKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
	<span class="n">Context</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Package</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PackageBody</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Entity</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Architecture</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Configuration</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="n">Primary</span> <span class="o">=</span> <span class="n">Context</span> <span class="o">|</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Entity</span> <span class="o">|</span> <span class="n">Package</span>
	<span class="n">Secondary</span> <span class="o">=</span> <span class="n">Architecture</span> <span class="o">|</span> <span class="n">PackageBody</span>
	<span class="n">WithContext</span> <span class="o">=</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Entity</span> <span class="o">|</span> <span class="n">Package</span> <span class="o">|</span> <span class="n">Architecture</span> <span class="o">|</span> <span class="n">PackageBody</span>

	<span class="n">All</span> <span class="o">=</span> <span class="n">Primary</span> <span class="o">|</span> <span class="n">Secondary</span>


<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span> <span class="nc">DependencyGraphVertexKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
	<span class="n">Document</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Library</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

	<span class="n">Context</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Package</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">PackageBody</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Entity</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Architecture</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Component</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Configuration</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>


<span class="nd">@export</span>
<span class="nd">@unique</span>
<span class="k">class</span> <span class="nc">DependencyGraphEdgeKind</span><span class="p">(</span><span class="n">Flag</span><span class="p">):</span>
	<span class="n">Document</span> <span class="o">=</span>       <span class="n">auto</span><span class="p">()</span>
	<span class="n">Library</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Context</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Package</span> <span class="o">=</span>        <span class="n">auto</span><span class="p">()</span>
	<span class="n">Entity</span> <span class="o">=</span>         <span class="n">auto</span><span class="p">()</span>
	<span class="c1"># Architecture = auto()</span>
	<span class="n">Configuration</span> <span class="o">=</span>  <span class="n">auto</span><span class="p">()</span>
	<span class="n">Component</span> <span class="o">=</span>      <span class="n">auto</span><span class="p">()</span>

	<span class="n">DeclaredIn</span> <span class="o">=</span>     <span class="n">auto</span><span class="p">()</span>
	<span class="n">Order</span> <span class="o">=</span>          <span class="n">auto</span><span class="p">()</span>
	<span class="n">Reference</span> <span class="o">=</span>      <span class="n">auto</span><span class="p">()</span>
	<span class="n">Implementation</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
	<span class="n">Instantiation</span> <span class="o">=</span>  <span class="n">auto</span><span class="p">()</span>

	<span class="n">SourceFile</span> <span class="o">=</span>                 <span class="n">Document</span> <span class="o">|</span> <span class="n">DeclaredIn</span>
	<span class="n">CompileOrder</span> <span class="o">=</span>               <span class="n">Document</span> <span class="o">|</span> <span class="n">Order</span>

	<span class="n">LibraryClause</span> <span class="o">=</span>              <span class="n">Library</span> <span class="o">|</span> <span class="n">Reference</span>
	<span class="n">UseClause</span> <span class="o">=</span>                  <span class="n">Package</span> <span class="o">|</span> <span class="n">Reference</span>
	<span class="n">ContextReference</span> <span class="o">=</span>           <span class="n">Context</span> <span class="o">|</span> <span class="n">Reference</span>

	<span class="n">EntityImplementation</span> <span class="o">=</span>       <span class="n">Entity</span> <span class="o">|</span> <span class="n">Implementation</span>
	<span class="n">PackageImplementation</span> <span class="o">=</span>      <span class="n">Package</span> <span class="o">|</span> <span class="n">Implementation</span>

	<span class="n">EntityInstantiation</span> <span class="o">=</span>        <span class="n">Entity</span> <span class="o">|</span> <span class="n">Instantiation</span>
	<span class="n">ComponentInstantiation</span> <span class="o">=</span>     <span class="n">Component</span> <span class="o">|</span> <span class="n">Instantiation</span>
	<span class="n">ConfigurationInstantiation</span> <span class="o">=</span> <span class="n">Configuration</span> <span class="o">|</span> <span class="n">Instantiation</span>


<span class="nd">@export</span>
<span class="k">class</span> <span class="nc">Design</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	A ``Design`` represents all loaded and analysed files (see :class:`~pyVHDLModel.Document`). It&#39;s the root of this</span>
<span class="sd">	document-object-model (DOM). It contains at least one VHDL library (see :class:`~pyVHDLModel.Library`).</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">name</span><span class="p">:</span>               <span class="n">Nullable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>         <span class="c1">#: Name of the design</span>
	<span class="n">_libraries</span><span class="p">:</span>         <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Library&#39;</span><span class="p">]</span>  <span class="c1">#: List of all libraries defined for a design.</span>
	<span class="n">_documents</span><span class="p">:</span>         <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">]</span>      <span class="c1">#: List of all documents loaded for a design.</span>
	<span class="n">_dependencyGraph</span><span class="p">:</span>   <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>   <span class="c1">#: The graph of all dependencies in the designs.</span>
	<span class="n">_compileOrderGraph</span><span class="p">:</span> <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>  <span class="c1">#: A graph derived from dependency graph containing the order of documents for compilation.</span>
	<span class="n">_hierarchyGraph</span><span class="p">:</span>    <span class="n">Graph</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>   <span class="c1">#: A graph derived from dependency graph containing the design hierarchy.</span>
	<span class="n">_toplevel</span><span class="p">:</span>          <span class="n">Union</span><span class="p">[</span><span class="n">Entity</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>  <span class="c1">#: When computed, the toplevel design unit is cached in this field.</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">		Initializes a VHDL design.</span>

<span class="sd">		:param name: Name of the design.</span>
<span class="sd">		&quot;&quot;&quot;</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span>       <span class="n">name</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_documents</span> <span class="o">=</span> <span class="p">[]</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Libraries</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Library&#39;</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all libraries specified for this design.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Documents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all documents (files) loaded for this design.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documents</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">CompileOrderGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">DependencyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">HierarchyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Graph</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">TopLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Entity&#39;</span><span class="p">:</span>
		<span class="c1"># Check for cached result</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">EdgeCount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hierarchy is not yet computed from dependency graph.&quot;</span><span class="p">)</span>

		<span class="n">roots</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">IterateRoots</span><span class="p">())</span>
		<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
			<span class="n">toplevel</span> <span class="o">=</span> <span class="n">roots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="p">[</span><span class="s2">&quot;toplevel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">toplevel</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_toplevel</span> <span class="o">=</span> <span class="n">toplevel</span><span class="o">.</span><span class="n">Value</span>
			<span class="k">return</span> <span class="n">toplevel</span><span class="o">.</span><span class="n">Value</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found more than one toplevel: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">_LoadLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">library</span><span class="p">:</span> <span class="s1">&#39;Library&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryExistsInDesignError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
		<span class="n">library</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">LoadStdLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
		<span class="kn">from</span> <span class="nn">pyVHDLModel.STD</span> <span class="kn">import</span> <span class="n">Std</span>

		<span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;std.vhdl&quot;</span><span class="p">))</span>

		<span class="n">library</span> <span class="o">=</span> <span class="n">Std</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="n">doc</span><span class="o">.</span><span class="n">_AddDesignUnit</span><span class="p">(</span><span class="n">designUnit</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_LoadLibrary</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">library</span>

	<span class="k">def</span> <span class="nf">LoadIEEELibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
		<span class="kn">from</span> <span class="nn">pyVHDLModel.IEEE</span> <span class="kn">import</span> <span class="n">Ieee</span>

		<span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;ieee.vhdl&quot;</span><span class="p">))</span>

		<span class="n">library</span> <span class="o">=</span> <span class="n">Ieee</span><span class="p">()</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="n">doc</span><span class="o">.</span><span class="n">_AddDesignUnit</span><span class="p">(</span><span class="n">designUnit</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_LoadLibrary</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">library</span>

	<span class="k">def</span> <span class="nf">AddLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">library</span><span class="p">:</span> <span class="s1">&#39;Library&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryExistsInDesignError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">library</span><span class="o">.</span><span class="n">_parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryRegisteredToForeignDesignError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
		<span class="n">library</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">GetLibrary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">libraryName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;Library&#39;</span><span class="p">:</span>
		<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">libraryName</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="n">lib</span> <span class="o">=</span> <span class="n">Library</span><span class="p">(</span><span class="n">libraryName</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">lib</span>
			<span class="n">lib</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>
			<span class="k">return</span> <span class="n">lib</span>

	<span class="c1"># TODO: allow overloaded parameter library to be str?</span>
	<span class="k">def</span> <span class="nf">AddDocument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="n">library</span><span class="p">:</span> <span class="s1">&#39;Library&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">LibraryNotRegisteredError</span><span class="p">(</span><span class="n">library</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
		<span class="n">document</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

		<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">entityIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">EntityExistsInLibraryError</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span>
			<span class="n">entity</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">architecturesPerEntity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span>
				<span class="k">for</span> <span class="n">architectureIdentifier</span><span class="p">,</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="k">if</span> <span class="n">architectureIdentifier</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">ArchitectureExistsInLibraryError</span><span class="p">(</span><span class="n">architecture</span><span class="p">,</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">],</span> <span class="n">library</span><span class="p">)</span>

					<span class="n">architecturesPerEntity</span><span class="p">[</span><span class="n">architectureIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
			<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
				<span class="n">architecturesPerEntity</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
				<span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecturesPerEntity</span>

				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">PackageExistsInLibraryError</span><span class="p">(</span><span class="n">package</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>
			<span class="n">package</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">packageBodyIdentifier</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageBodyIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">PackageBodyExistsError</span><span class="p">(</span><span class="n">packageBody</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">[</span><span class="n">packageBodyIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageBody</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">configurationIdentifier</span><span class="p">,</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">configurationIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">ConfigurationExistsInLibraryError</span><span class="p">(</span><span class="n">configuration</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="p">[</span><span class="n">configurationIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">configuration</span>
			<span class="n">configuration</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

		<span class="k">for</span> <span class="n">contextIdentifier</span><span class="p">,</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">contextIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">ContextExistsInLibraryError</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">library</span><span class="p">)</span>

			<span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">contextIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">context</span>
			<span class="n">context</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

	<span class="k">def</span> <span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="k">yield from</span> <span class="n">library</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">Analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">AnalyzeDependencies</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">AnalyzeDependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateDependencyGraph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateCompileOrderGraph</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">IndexPackages</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">IndexArchitectures</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">LinkContexts</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkArchitectures</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkPackageBodies</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkLibraryReferences</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkPackageReferences</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkContextReferences</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">LinkComponents</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">LinkInstantiations</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">CreateHierarchyGraph</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">ComputeCompileOrder</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">CreateDependencyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">predefinedLibraries</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="s2">&quot;ieee&quot;</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">library</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Library</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
			<span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">contextIdentifier</span><span class="p">,</span> <span class="n">context</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">contextIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">context</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Context</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">packageIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">package</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Package</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">packageBodyIdentifier</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">packageBodyIdentifier</span><span class="si">}</span><span class="s2">(body)&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">packageBody</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">PackageBody</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">packageBody</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">packageBody</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">entityIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Entity</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">entityIdentifier</span><span class="p">,</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architectureIdentifier</span><span class="p">,</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">entityIdentifier</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">architectureIdentifier</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">architecture</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
					<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span>
					<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
					<span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="k">for</span> <span class="n">configurationIdentifier</span><span class="p">,</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
				<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">configurationIdentifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">configuration</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Configuration</span>
				<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">configuration</span><span class="o">.</span><span class="n">_library</span><span class="o">.</span><span class="n">_normalizedIdentifier</span> <span class="ow">in</span> <span class="n">predefinedLibraries</span>
				<span class="n">configuration</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

	<span class="k">def</span> <span class="nf">CreateCompileOrderGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">document</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documents</span><span class="p">:</span>
			<span class="n">dependencyVertex</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="n">vertexID</span><span class="o">=</span><span class="n">document</span><span class="o">.</span><span class="n">Path</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">document</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="p">)</span>
			<span class="n">dependencyVertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Document</span>
			<span class="n">document</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span>

			<span class="n">compilerOrderVertex</span> <span class="o">=</span> <span class="n">dependencyVertex</span><span class="o">.</span><span class="n">Copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="p">,</span> <span class="n">linkingKeyToOriginalVertex</span><span class="o">=</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">,</span> <span class="n">linkingKeyFromOriginalVertex</span><span class="o">=</span><span class="s2">&quot;compileOrderVertex&quot;</span><span class="p">)</span>
			<span class="n">document</span><span class="o">.</span><span class="n">_compileOrderVertex</span> <span class="o">=</span> <span class="n">compilerOrderVertex</span>

			<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="n">document</span><span class="o">.</span><span class="n">_designUnits</span><span class="p">:</span>
				<span class="n">edge</span> <span class="o">=</span> <span class="n">dependencyVertex</span><span class="o">.</span><span class="n">LinkFromVertex</span><span class="p">(</span><span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">SourceFile</span>

	<span class="k">def</span> <span class="nf">LinkContexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span><span class="p">):</span>
			<span class="c1"># Create entries in _referenced*** for the current working library under its real name.</span>
			<span class="n">workingLibrary</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">Library</span>
			<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">workingLibrary</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

			<span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
			<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
			<span class="n">context</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

			<span class="c1"># Process all library clauses</span>
			<span class="k">for</span> <span class="n">libraryReference</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_libraryReferences</span><span class="p">:</span>
				<span class="c1"># A library clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">librarySymbol</span> <span class="ow">in</span> <span class="n">libraryReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">ReferencedLibraryNotExistingError</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">librarySymbol</span><span class="p">)</span>
						<span class="c1"># TODO: add position to these messages</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>

					<span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">libraryReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

			<span class="c1"># Process all use clauses</span>
			<span class="k">for</span> <span class="n">packageReference</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">PackageReferences</span><span class="p">:</span>
				<span class="c1"># A use clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">packageReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">packageSymbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">.</span><span class="n">Prefix</span>
					<span class="n">librarySymbol</span> <span class="o">=</span> <span class="n">packageSymbol</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="n">packageIdentifier</span> <span class="o">=</span> <span class="n">packageSymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">library</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">Library</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use clause references library &#39;</span><span class="si">{</span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">package</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageSymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">packageSymbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>

					<span class="c1"># TODO: warn duplicate package reference</span>
					<span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">packageReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>

					<span class="c1"># TODO: update the namespace with visible members</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="k">pass</span>

					<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">PackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">LinkArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">LinkArchitectures</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">LinkPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">LinkPackageBodies</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">LinkLibraryReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">DEFAULT_LIBRARIES</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,)</span>

		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">WithContext</span><span class="p">):</span>
			<span class="c1"># All primary units supporting a context, have at least one library implicitly referenced</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">):</span>
				<span class="k">for</span> <span class="n">libraryIdentifier</span> <span class="ow">in</span> <span class="n">DEFAULT_LIBRARIES</span><span class="p">:</span>
					<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedLibrary</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: catch KeyError on self._libraries[libName]</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

				<span class="n">workingLibrary</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
				<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">workingLibrary</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
				<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>


				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedLibrary</span>
				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
				<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

				<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

			<span class="c1"># All secondary units inherit referenced libraries from their primary units.</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
					<span class="n">referencedLibraries</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_referencedLibraries</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
					<span class="n">referencedLibraries</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">_referencedLibraries</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

				<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="n">referencedLibraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>

			<span class="k">for</span> <span class="n">libraryReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_libraryReferences</span><span class="p">:</span>
				<span class="c1"># A library clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">librarySymbol</span> <span class="ow">in</span> <span class="n">libraryReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Library &#39;</span><span class="si">{</span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; referenced by library clause of design unit &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in design.&quot;</span><span class="p">)</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
					<span class="c1"># TODO: warn duplicate library reference</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">library</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">libraryReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">LibraryClause</span>

	<span class="k">def</span> <span class="nf">LinkPackageReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">DEFAULT_PACKAGES</span> <span class="o">=</span> <span class="p">(</span>
			<span class="p">(</span><span class="s2">&quot;std&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;standard&quot;</span><span class="p">,)),</span>
		<span class="p">)</span>

		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">WithContext</span><span class="p">):</span>
			<span class="c1"># All primary units supporting a context, have at least one package implicitly referenced</span>
			<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PrimaryUnit</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="o">!=</span> <span class="s2">&quot;std&quot;</span> <span class="ow">and</span> \
					<span class="n">designUnit</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="o">!=</span> <span class="s2">&quot;standard&quot;</span><span class="p">:</span>
					<span class="k">for</span> <span class="n">lib</span> <span class="ow">in</span> <span class="n">DEFAULT_PACKAGES</span><span class="p">:</span>
						<span class="k">if</span> <span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
							<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>
						<span class="k">for</span> <span class="n">pack</span> <span class="ow">in</span> <span class="n">lib</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
							<span class="n">referencedPackage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">pack</span><span class="p">]</span>
							<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">lib</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">pack</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedPackage</span>
							<span class="c1"># TODO: catch KeyError on self._libraries[lib[0]]._packages[pack]</span>
							<span class="c1"># TODO: warn duplicate package reference</span>

							<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">referencedPackage</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
							<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>


			<span class="c1"># All secondary units inherit referenced packages from their primary units.</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
					<span class="n">referencedPackages</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_referencedPackages</span>
				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">designUnit</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
					<span class="n">referencedPackages</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">Package</span><span class="o">.</span><span class="n">_referencedPackages</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

				<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">referencedPackages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

			<span class="k">for</span> <span class="n">packageReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">PackageReferences</span><span class="p">:</span>
				<span class="c1"># A use clause can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">packageReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">packageSymbol</span> <span class="o">=</span> <span class="n">symbol</span><span class="o">.</span><span class="n">Prefix</span>
					<span class="n">librarySymbol</span> <span class="o">=</span> <span class="n">packageSymbol</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="n">packageIdentifier</span> <span class="o">=</span> <span class="n">packageSymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">library</span><span class="p">:</span> <span class="n">Library</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Use clause references library &#39;</span><span class="si">{</span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">package</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageSymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">packageSymbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>

					<span class="c1"># TODO: warn duplicate package reference</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">packageReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span>

					<span class="c1"># TODO: update the namespace with visible members</span>
					<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">AllPackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="k">for</span> <span class="n">componentIdentifier</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_components</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
							<span class="n">designUnit</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">_elements</span><span class="p">[</span><span class="n">componentIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">component</span>

					<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">PackageMembersReferenceSymbol</span><span class="p">):</span>
						<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">LinkContextReferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">designUnit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">contextReference</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_contextReferences</span><span class="p">:</span>
				<span class="c1"># A context reference can have multiple comma-separated references</span>
				<span class="k">for</span> <span class="n">contextSymbol</span> <span class="ow">in</span> <span class="n">contextReference</span><span class="o">.</span><span class="n">Symbols</span><span class="p">:</span>
					<span class="n">librarySymbol</span> <span class="o">=</span> <span class="n">contextSymbol</span><span class="o">.</span><span class="n">Prefix</span>

					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="n">contextIdentifier</span> <span class="o">=</span> <span class="n">contextSymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>

					<span class="c1"># In case work is used, resolve to the real library name.</span>
					<span class="k">if</span> <span class="n">libraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">Library</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">referencedLibrary</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">libraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="c1"># TODO: This check doesn&#39;t trigger if it&#39;s the working library.</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Context reference references library &#39;</span><span class="si">{</span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;, which was not referenced by a library clause.&quot;</span><span class="p">)</span>
					<span class="k">else</span><span class="p">:</span>
						<span class="n">referencedLibrary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">referencedContext</span> <span class="o">=</span> <span class="n">referencedLibrary</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">contextIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Context &#39;</span><span class="si">{</span><span class="n">contextSymbol</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">librarySymbol</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">referencedLibrary</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

					<span class="n">librarySymbol</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">referencedLibrary</span>
					<span class="n">contextSymbol</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">referencedContext</span>

					<span class="c1"># TODO: warn duplicate referencedContext reference</span>
					<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedContexts</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">contextIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">referencedContext</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">referencedContext</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">contextReference</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ContextReference</span>

		<span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateTopologically</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Context</span><span class="p">:</span>
				<span class="n">context</span><span class="p">:</span> <span class="n">Context</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">Value</span>
				<span class="k">for</span> <span class="n">designUnitVertex</span> <span class="ow">in</span> <span class="n">vertex</span><span class="o">.</span><span class="n">IteratePredecessorVertices</span><span class="p">():</span>
					<span class="n">designUnit</span><span class="p">:</span> <span class="n">DesignUnit</span> <span class="o">=</span> <span class="n">designUnitVertex</span><span class="o">.</span><span class="n">Value</span>
					<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">library</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
						<span class="c1"># if libraryIdentifier in designUnit._referencedLibraries:</span>
						<span class="c1"># 	raise VHDLModelException(f&quot;Referenced library &#39;{library.Identifier}&#39; already exists in references for design unit &#39;{designUnit.Identifier}&#39;.&quot;)</span>

						<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">library</span>
						<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

					<span class="k">for</span> <span class="n">libraryIdentifier</span><span class="p">,</span> <span class="n">packages</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
						<span class="k">for</span> <span class="n">packageIdentifier</span><span class="p">,</span> <span class="n">package</span> <span class="ow">in</span> <span class="n">packages</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
							<span class="k">if</span> <span class="n">packageIdentifier</span> <span class="ow">in</span> <span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">:</span>
								<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced package &#39;</span><span class="si">{</span><span class="n">package</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in references for design unit &#39;</span><span class="si">{</span><span class="n">designUnit</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

							<span class="n">designUnit</span><span class="o">.</span><span class="n">_referencedPackages</span><span class="p">[</span><span class="n">libraryIdentifier</span><span class="p">][</span><span class="n">packageIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">package</span>

	<span class="k">def</span> <span class="nf">LinkComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>
			<span class="n">library</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_library</span>
			<span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">package</span><span class="o">.</span><span class="n">_components</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">try</span><span class="p">:</span>
					<span class="n">entity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">component</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
				<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
					<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found for component &#39;</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; in library &#39;</span><span class="si">{</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

				<span class="n">component</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>

				<span class="c1"># QUESTION: Add link in dependency graph as dashed line from component to entity?</span>
				<span class="c1">#           Currently, component has no _dependencyVertex field</span>

	<span class="k">def</span> <span class="nf">LinkInstantiations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">IterateDesignUnits</span><span class="p">(</span><span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">architecture</span><span class="o">.</span><span class="n">IterateInstantiations</span><span class="p">():</span>
				<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">EntityInstantiation</span><span class="p">):</span>
					<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span>
					<span class="n">normalizedLibraryIdentifier</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">if</span> <span class="n">normalizedLibraryIdentifier</span> <span class="o">==</span> <span class="s2">&quot;work&quot;</span><span class="p">:</span>
						<span class="n">libraryIdentifier</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">Identifier</span>
						<span class="n">normalizedLibraryIdentifier</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">Library</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
					<span class="k">elif</span> <span class="n">normalizedLibraryIdentifier</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_referencedLibraries</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span><span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in architecture &#39;</span><span class="si">{</span><span class="n">architecture</span><span class="si">!r}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Add a library reference to the architecture or entity using a library clause like: &#39;library </span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">;&#39;.&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="p">[</span><span class="n">normalizedLibraryIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in design.&quot;</span><span class="p">)</span>
						<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No design units were parsed into library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39;. Thus it doesn&#39;t exist in design.&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="k">try</span><span class="p">:</span>
						<span class="n">entity</span> <span class="o">=</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
					<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
						<span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Referenced entity &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; in direct entity instantiation &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="si">}</span><span class="s2">: entity </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; not found in </span><span class="si">{</span><span class="s1">&#39;working &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;work&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">library &#39;</span><span class="si">{</span><span class="n">libraryIdentifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
						<span class="n">libs</span> <span class="o">=</span> <span class="p">[</span><span class="n">library</span><span class="o">.</span><span class="n">Identifier</span> <span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">entityIdentifier</span> <span class="ow">in</span> <span class="n">library</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">entityIdentifier</span> <span class="o">==</span> <span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span>
						<span class="k">if</span> <span class="n">libs</span><span class="p">:</span>
							<span class="n">ex</span><span class="o">.</span><span class="n">add_note</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found entity &#39;</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; in other libraries: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">libs</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
						<span class="k">raise</span> <span class="n">ex</span>

					<span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Prefix</span><span class="o">.</span><span class="n">Library</span> <span class="o">=</span> <span class="n">library</span>
					<span class="n">instance</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">EntityInstantiation</span>

				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">ComponentInstantiation</span><span class="p">):</span>
					<span class="n">component</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">FindComponent</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">Component</span><span class="p">)</span>

					<span class="n">instance</span><span class="o">.</span><span class="n">Component</span><span class="o">.</span><span class="n">Component</span> <span class="o">=</span> <span class="n">component</span>

					<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">,</span> <span class="n">edgeValue</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
					<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ComponentInstantiation</span>

				<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">ConfigurationInstantiation</span><span class="p">):</span>
					<span class="c1"># pass</span>
					<span class="nb">print</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">Label</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">Configuration</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">IndexPackages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexPackages</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">IndexArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">library</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_libraries</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">library</span><span class="o">.</span><span class="n">IndexArchitectures</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">CreateHierarchyGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="c1"># Copy all entity and architecture vertices from dependency graph to hierarchy graph and double-link them</span>
		<span class="n">entityArchitectureFilter</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Entity</span> <span class="o">|</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span>
		<span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateVertices</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">entityArchitectureFilter</span><span class="p">):</span>
			<span class="n">hierarchyVertex</span> <span class="o">=</span> <span class="n">vertex</span><span class="o">.</span><span class="n">Copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="p">,</span> <span class="n">linkingKeyToOriginalVertex</span><span class="o">=</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">,</span> <span class="n">linkingKeyFromOriginalVertex</span><span class="o">=</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">)</span>
			<span class="n">vertex</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">_hierarchyVertex</span> <span class="o">=</span> <span class="n">hierarchyVertex</span>

		<span class="c1"># Copy implementation edges from</span>
		<span class="k">for</span> <span class="n">hierarchyArchitectureVertex</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hierarchyGraph</span><span class="o">.</span><span class="n">IterateVertices</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">DependencyGraphVertexKind</span><span class="o">.</span><span class="n">Architecture</span><span class="p">):</span>
			<span class="k">for</span> <span class="n">dependencyEdge</span> <span class="ow">in</span> <span class="n">hierarchyArchitectureVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">IterateOutboundEdges</span><span class="p">():</span>
				<span class="n">kind</span><span class="p">:</span> <span class="n">DependencyGraphEdgeKind</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span>
				<span class="k">if</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Implementation</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
					<span class="n">hierarchyDestinationVertex</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">]</span>
					<span class="n">newEdge</span> <span class="o">=</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">LinkFromVertex</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">)</span>
				<span class="k">elif</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Instantiation</span> <span class="ow">in</span> <span class="n">kind</span><span class="p">:</span>
					<span class="n">hierarchyDestinationVertex</span> <span class="o">=</span> <span class="n">dependencyEdge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;hierarchyVertex&quot;</span><span class="p">]</span>

					<span class="c1"># FIXME: avoid parallel edges, to graph can be converted to a tree until &quot;real&quot; hierarchy is computed (unrole generics and blocks)</span>
					<span class="k">if</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">HasLinkToDestination</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">):</span>
						<span class="k">continue</span>

					<span class="n">newEdge</span> <span class="o">=</span> <span class="n">hierarchyArchitectureVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">hierarchyDestinationVertex</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">continue</span>

				<span class="n">newEdge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kind</span>

	<span class="k">def</span> <span class="nf">ComputeCompileOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">def</span> <span class="nf">predicate</span><span class="p">(</span><span class="n">edge</span><span class="p">:</span> <span class="n">Edge</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
			<span class="k">return</span> <span class="p">(</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Implementation</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">Instantiation</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">UseClause</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="ow">or</span>
				<span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">ContextReference</span> <span class="ow">in</span> <span class="n">edge</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span>
			<span class="p">)</span> <span class="ow">and</span> <span class="n">edge</span><span class="o">.</span><span class="n">Destination</span><span class="p">[</span><span class="s2">&quot;predefined&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span>

		<span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyGraph</span><span class="o">.</span><span class="n">IterateEdges</span><span class="p">(</span><span class="n">predicate</span><span class="o">=</span><span class="n">predicate</span><span class="p">):</span>
			<span class="n">sourceDocument</span><span class="p">:</span>      <span class="n">Document</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="n">Source</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">Document</span>
			<span class="n">destinationDocument</span><span class="p">:</span> <span class="n">Document</span> <span class="o">=</span> <span class="n">edge</span><span class="o">.</span><span class="n">Destination</span><span class="o">.</span><span class="n">Value</span><span class="o">.</span><span class="n">Document</span>

			<span class="n">sourceVertex</span> <span class="o">=</span>      <span class="n">sourceDocument</span><span class="o">.</span><span class="n">_compileOrderVertex</span>
			<span class="n">destinationVertex</span> <span class="o">=</span> <span class="n">destinationDocument</span><span class="o">.</span><span class="n">_compileOrderVertex</span>

			<span class="c1"># Don&#39;t add self-edges</span>
			<span class="k">if</span> <span class="n">sourceVertex</span> <span class="ow">is</span> <span class="n">destinationVertex</span><span class="p">:</span>
				<span class="k">continue</span>
			<span class="c1"># Don&#39;t add parallel edges</span>
			<span class="k">elif</span> <span class="n">sourceVertex</span><span class="o">.</span><span class="n">HasLinkToDestination</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">):</span>
				<span class="k">continue</span>

			<span class="n">e</span> <span class="o">=</span> <span class="n">sourceVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">)</span>
			<span class="n">e</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">CompileOrder</span>

			<span class="n">e</span> <span class="o">=</span> <span class="n">sourceVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">destinationVertex</span><span class="p">[</span><span class="s2">&quot;dependencyVertex&quot;</span><span class="p">])</span>
			<span class="n">e</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">CompileOrder</span>

	<span class="k">def</span> <span class="nf">IterateDocumentsInCompileOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="o">.</span><span class="n">EdgeCount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Compile order is not yet computed from dependency graph.&quot;</span><span class="p">)</span>

		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderGraph</span><span class="o">.</span><span class="n">IterateTopologically</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">GetUnusedDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]:</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>


<span class="nd">@export</span>
<span class="k">class</span> <span class="nc">Library</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">,</span> <span class="n">NamedEntityMixin</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;A ``Library`` represents a VHDL library. It contains all *primary* and *secondary* design units.&quot;&quot;&quot;</span>

	<span class="n">_contexts</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all contexts defined in a library.</span>
	<span class="n">_configurations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>            <span class="c1">#: Dictionary of all configurations defined in a library.</span>
	<span class="n">_entities</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]</span>                   <span class="c1">#: Dictionary of all entities defined in a library.</span>
	<span class="n">_architectures</span><span class="p">:</span>  <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]</span>  <span class="c1">#: Dictionary of all architectures defined in a library.</span>
	<span class="n">_packages</span><span class="p">:</span>       <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all packages defined in a library.</span>
	<span class="n">_packageBodies</span><span class="p">:</span>  <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]</span>              <span class="c1">#: Dictionary of all package bodies defined in a library.</span>

	<span class="n">_dependencyVertex</span><span class="p">:</span> <span class="n">Vertex</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s1">&#39;Library&#39;</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>

<div class="viewcode-block" id="Library.__init__"><a class="viewcode-back" href="../pyGHDL/pyGHDL.dom.NonStandard.html#pyGHDL.dom.NonStandard.Library.__init__">[docs]</a>	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
		<span class="n">NamedEntityMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span> <span class="o">=</span>  <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span> <span class="o">=</span>   <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span> <span class="o">=</span>        <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span> <span class="o">=</span>   <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="kc">None</span></div>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all context declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Configurations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all configuration declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all entity declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Architectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all architectures declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">PackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package body declarations declared in this library.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">DependencyVertex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vertex</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span>

	<span class="k">def</span> <span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">context</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">package</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">PackageBody</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">packageBody</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Entity</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">entity</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="k">yield</span> <span class="n">architecture</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Configuration</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">configuration</span>

		<span class="c1"># for verificationProperty in self._verificationUnits.values():</span>
		<span class="c1"># 	yield verificationProperty</span>
		<span class="c1"># for verificationUnit in self._verificationProperties.values():</span>
		<span class="c1"># 	yield entity</span>
		<span class="c1"># for verificationMode in self._verificationModes.values():</span>
		<span class="c1"># 	yield verificationMode</span>

	<span class="k">def</span> <span class="nf">LinkArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">entityName</span><span class="p">,</span> <span class="n">architecturesPerEntity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">entityName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
				<span class="n">architectureNames</span> <span class="o">=</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
				<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entity &#39;</span><span class="si">{</span><span class="n">entityName</span><span class="si">}</span><span class="s2">&#39; referenced by architecture(s) &#39;</span><span class="si">{</span><span class="n">architectureNames</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in library &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
				<span class="c1"># TODO: search in other libraries to find that entity.</span>
				<span class="c1"># TODO: add code position</span>

			<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architecturesPerEntity</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="n">entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">entityName</span><span class="p">]</span>

				<span class="k">if</span> <span class="n">architecture</span><span class="o">.</span><span class="n">NormalizedIdentifier</span> <span class="ow">in</span> <span class="n">entity</span><span class="o">.</span><span class="n">_architectures</span><span class="p">:</span>
					<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Architecture &#39;</span><span class="si">{</span><span class="n">architecture</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists for entity &#39;</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
					<span class="c1"># TODO: add code position of existing and current</span>

				<span class="n">entity</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">architecture</span><span class="o">.</span><span class="n">NormalizedIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">architecture</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">_entity</span><span class="o">.</span><span class="n">Entity</span> <span class="o">=</span> <span class="n">entity</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">ParentNamespace</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">_namespace</span>

				<span class="c1"># add &quot;architecture -&gt; entity&quot; relation in dependency graph</span>
				<span class="n">dependency</span> <span class="o">=</span> <span class="n">architecture</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
				<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">EntityImplementation</span>

	<span class="k">def</span> <span class="nf">LinkPackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">packageBodyName</span><span class="p">,</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
			<span class="k">if</span> <span class="n">packageBodyName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
				<span class="k">raise</span> <span class="n">VHDLModelException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Package &#39;</span><span class="si">{</span><span class="n">packageBodyName</span><span class="si">}</span><span class="s2">&#39; referenced by package body &#39;</span><span class="si">{</span><span class="n">packageBodyName</span><span class="si">}</span><span class="s2">&#39; doesn&#39;t exist in library &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

			<span class="n">package</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">packageBodyName</span><span class="p">]</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">_package</span><span class="o">.</span><span class="n">Package</span> <span class="o">=</span> <span class="n">package</span>
			<span class="n">packageBody</span><span class="o">.</span><span class="n">_namespace</span><span class="o">.</span><span class="n">ParentNamespace</span> <span class="o">=</span> <span class="n">package</span><span class="o">.</span><span class="n">_namespace</span>

			<span class="c1"># add &quot;package body -&gt; package&quot; relation in dependency graph</span>
			<span class="n">dependency</span> <span class="o">=</span> <span class="n">packageBody</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="o">.</span><span class="n">LinkToVertex</span><span class="p">(</span><span class="n">package</span><span class="o">.</span><span class="n">_dependencyVertex</span><span class="p">)</span>
			<span class="n">dependency</span><span class="p">[</span><span class="s2">&quot;kind&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">DependencyGraphEdgeKind</span><span class="o">.</span><span class="n">PackageImplementation</span>

	<span class="k">def</span> <span class="nf">IndexPackages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="n">package</span><span class="o">.</span><span class="n">IndexPackage</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">IndexArchitectures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
			<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="n">architecture</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>

<div class="viewcode-block" id="Library.__str__"><a class="viewcode-back" href="../pyGHDL/pyGHDL.dom.NonStandard.html#pyGHDL.dom.NonStandard.Library.__str__">[docs]</a>	<span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Library: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>


<span class="nd">@export</span>
<span class="k">class</span> <span class="nc">Document</span><span class="p">(</span><span class="n">ModelEntity</span><span class="p">,</span> <span class="n">DocumentedEntityMixin</span><span class="p">):</span>
<span class="w">	</span><span class="sd">&quot;&quot;&quot;A ``Document`` represents a sourcefile. It contains *primary* and *secondary* design units.&quot;&quot;&quot;</span>

	<span class="n">_path</span><span class="p">:</span>                   <span class="n">Path</span>                                  <span class="c1">#: path to the document. ``None`` if virtual document.</span>
	<span class="n">_designUnits</span><span class="p">:</span>            <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]</span>                    <span class="c1">#: List of all design units defined in a document.</span>
	<span class="n">_contexts</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all contexts defined in a document.</span>
	<span class="n">_configurations</span><span class="p">:</span>         <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]</span>            <span class="c1">#: Dictionary of all configurations defined in a document.</span>
	<span class="n">_entities</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]</span>                   <span class="c1">#: Dictionary of all entities defined in a document.</span>
	<span class="n">_architectures</span><span class="p">:</span>          <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]</span>  <span class="c1">#: Dictionary of all architectures defined in a document.</span>
	<span class="n">_packages</span><span class="p">:</span>               <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]</span>                  <span class="c1">#: Dictionary of all packages defined in a document.</span>
	<span class="n">_packageBodies</span><span class="p">:</span>          <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]</span>              <span class="c1">#: Dictionary of all package bodies defined in a document.</span>
	<span class="n">_verificationUnits</span><span class="p">:</span>      <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">]</span>         <span class="c1">#: Dictionary of all PSL verification units defined in a document.</span>
	<span class="n">_verificationProperties</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">]</span>     <span class="c1">#: Dictionary of all PSL verification properties defined in a document.</span>
	<span class="n">_verificationModes</span><span class="p">:</span>      <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">]</span>         <span class="c1">#: Dictionary of all PSL verification modes defined in a document.</span>

	<span class="n">_dependencyVertex</span><span class="p">:</span>       <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
	<span class="n">_compileOrderVertex</span><span class="p">:</span>     <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">documentation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
		<span class="n">DocumentedEntityMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">documentation</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span>                   <span class="n">path</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span> <span class="o">=</span>            <span class="p">[]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span> <span class="o">=</span>         <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span> <span class="o">=</span>          <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span> <span class="o">=</span>               <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span> <span class="o">=</span>          <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span> <span class="o">=</span>      <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span> <span class="o">=</span> <span class="p">{}</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span> <span class="o">=</span>      <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_dependencyVertex</span> <span class="o">=</span> <span class="kc">None</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderVertex</span> <span class="o">=</span> <span class="kc">None</span>

	<span class="k">def</span> <span class="nf">_AddEntity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Entity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Entity</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Entity&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An entity &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>


	<span class="k">def</span> <span class="nf">_AddArchitecture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Architecture</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Architecture&#39;.&quot;</span><span class="p">)</span>

		<span class="n">entity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">Entity</span>
		<span class="n">entityIdentifier</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">architectures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">Identifier</span> <span class="ow">in</span> <span class="n">architectures</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An architecture &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; for entity &#39;</span><span class="si">{</span><span class="n">entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

			<span class="n">architectures</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="p">:</span> <span class="n">item</span><span class="p">}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddPackage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Package</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">Package</span><span class="p">,</span> <span class="n">PackageInstantiation</span><span class="p">)):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Package&#39; or &#39;PackageInstantiation&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A package &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddPackageBody</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">PackageBody</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;PackageBody&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A package body &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddContext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Context&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A context &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;Configuration&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A configuration &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddVerificationUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationUnit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationUnit&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification unit &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddVerificationProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationProperty</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationProperty&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification property &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddVerificationMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">VerificationMode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;VerificationMode&#39;.&quot;</span><span class="p">)</span>

		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A verification mode &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="k">def</span> <span class="nf">_AddDesignUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">DesignUnit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
		<span class="n">identifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
		<span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Entity</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">):</span>
			<span class="n">entityIdentifier</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">NormalizedIdentifier</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">architectures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span>
				<span class="k">if</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">architectures</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An architecture &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; for entity &#39;</span><span class="si">{</span><span class="n">item</span><span class="o">.</span><span class="n">Entity</span><span class="o">.</span><span class="n">Identifier</span><span class="si">}</span><span class="s2">&#39; already exists in this document.&quot;</span><span class="p">)</span>

				<span class="n">architectures</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
			<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="p">[</span><span class="n">entityIdentifier</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">identifier</span><span class="p">:</span> <span class="n">item</span><span class="p">}</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Package</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Context</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">):</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
		<span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">DesignUnit</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is an unknown &#39;DesignUnit&#39;.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Parameter &#39;item&#39; is not of type &#39;DesignUnit&#39;.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
		<span class="n">item</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="bp">self</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">DesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all design units declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_designUnits</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Contexts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Context</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all context declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Configurations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all configuration declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Entity</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all entity declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Architectures</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Architecture</span><span class="p">]]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all architecture declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">Packages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Package</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">PackageBodies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PackageBody</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all package body declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">VerificationUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationUnit</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all verification unit declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationUnits</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">VerificationProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationProperty</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all verification property declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationProperties</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">VerificationModes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">VerificationMode</span><span class="p">]:</span>
<span class="w">		</span><span class="sd">&quot;&quot;&quot;Returns a list of all verification mode declarations found in this document.&quot;&quot;&quot;</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_verificationModes</span>

	<span class="nd">@property</span>
	<span class="k">def</span> <span class="nf">CompileOrderVertex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Vertex</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
		<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compileOrderVertex</span>

	<span class="k">def</span> <span class="nf">IterateDesignUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">:</span> <span class="n">DesignUnitKind</span> <span class="o">=</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">All</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">DesignUnit</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Context</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">context</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contexts</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">context</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Package</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">package</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packages</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">package</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">PackageBody</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">packageBody</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_packageBodies</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">packageBody</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Entity</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">entity</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Architecture</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">architectures</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">for</span> <span class="n">architecture</span> <span class="ow">in</span> <span class="n">architectures</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
					<span class="k">yield</span> <span class="n">architecture</span>

		<span class="k">if</span> <span class="n">DesignUnitKind</span><span class="o">.</span><span class="n">Configuration</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">:</span>
			<span class="k">for</span> <span class="n">configuration</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_configurations</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
				<span class="k">yield</span> <span class="n">configuration</span>

		<span class="c1"># for verificationProperty in self._verificationUnits.values():</span>
		<span class="c1"># 	yield verificationProperty</span>
		<span class="c1"># for verificationUnit in self._verificationProperties.values():</span>
		<span class="c1"># 	yield entity</span>
		<span class="c1"># for verificationMode in self._verificationModes.values():</span>
		<span class="c1"># 	yield verificationMode</span>
</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2002-2023, Tristan Gingold and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-solid fa-brands fa-github" href="https://github.com/ghdl/ghdl" aria-label="GitHub ghdl/ghdl"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>